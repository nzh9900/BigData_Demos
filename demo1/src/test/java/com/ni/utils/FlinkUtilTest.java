package com.ni.utils;


import org.junit.Test;

import static org.junit.Assert.assertEquals;

public class FlinkUtilTest {
    //@Test
    //public void getSavepointPath() {
    //    assertEquals("hdfs://nameservice1:/tmp/flink-savepoint/savepoint-b58f40-ce8bd8127080",
    //            FlinkUtil.getSavepointPath("SLF4J: Class path contains multiple SLF4J bindings.\n" +
    //                    "SLF4J: Found binding in [jar:file:/opt/cloudera/parcels/FLINK-1.12.4-BIN-SCALA_2.11/lib/flink/lib/log4j-slf4j-impl-2.12.1.jar!/org/slf4j/impl/StaticLoggerBinder.class]\n" +
    //                    "SLF4J: Found binding in [jar:file:/opt/cloudera/parcels/CDH-6.3.2-1.cdh6.3.2.p0.1605554/jars/slf4j-log4j12-1.7.25.jar!/org/slf4j/impl/StaticLoggerBinder.class]\n" +
    //                    "SLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.\n" +
    //                    "SLF4J: Actual binding is of type [org.apache.logging.slf4j.Log4jLoggerFactory]\n" +
    //                    "Suspending job \"b58f40d716b85c34156cd98ea11f1676\" with a savepoint.\n" +
    //                    "14:52:27.694 [main-EventThread] ERROR org.apache.flink.shaded.curator4.org.apache.curator.ConnectionState - Authentication failed\n" +
    //                    "Savepoint completed. Path: hdfs://nameservice1:/tmp/flink-savepoint/savepoint-b58f40-ce8bd8127080"));
    //}

    //@Test
    //public void stopFlinkJobWithSavepoint() {
    //    FlinkUtil.stopFlinkJobWithSavepoint("/opt/flink", "application_wfadsfds", "fd72014d4c864993a2e5a9287b4a9c5d");
    //}
    //
    //@Test
    //public void stopFlinkYarnSession() {
    //    FlinkUtil.stopFlinkYarnSession("/opt/flink", "application_awd1231");
    //}
    //
    //@Test
    //public void cmd() {
    //    System.out.println(CmdUtil.getInstance().executeProcess("/opt/flink/bin/yarn-session.sh -id application_awd1231".split(" ")));
    //}
    //
    //@Test
    //public void stopFlinkJobWithoutSavepoint() {
    //    FlinkUtil.stopFlinkJobWithoutSavepoint("/opt/flink", "application_wfadsfds", "fd72014d4c864993a2e5a9287b4a9c5d");
    //}
}
